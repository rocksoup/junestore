{% comment %}
  ABOUTME: Renders a size chart modal that can be triggered from product pages.
  ABOUTME: Displays comprehensive sizing information for lingerie products (bras, panties, sets).
{% endcomment %}

<modal-dialog id="SizeChartModal-{{ section.id }}" class="size-chart-modal">
  <div
    role="dialog"
    aria-labelledby="SizeChartModalHeading-{{ section.id }}"
    aria-modal="true"
    class="size-chart-modal__content"
    tabindex="-1"
  >
    <button
      id="ModalClose-{{ section.id }}"
      type="button"
      class="size-chart-modal__toggle"
      aria-label="{{ 'accessibility.close' | t }}"
    >
      {{ 'icon-close.svg' | inline_asset_content }}
    </button>

    <div class="size-chart-modal__content-info">
      <h2 id="SizeChartModalHeading-{{ section.id }}" class="size-chart-modal__heading">
        {%- if section.settings.heading != blank -%}
          {{ section.settings.heading }}
        {%- else -%}
          {{ 'size_chart.heading' | t }}
        {%- endif -%}
      </h2>

      <size-chart>
        {% render 'size-chart',
          product: product,
          show_units_toggle: section.settings.show_units_toggle
        %}
      </size-chart>
    </div>
  </div>
</modal-dialog>

{% stylesheet %}
  .size-chart-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 999;
    display: none;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.5);
  }

  .size-chart-modal[open] {
    display: flex;
  }

  .size-chart-modal__content {
    position: relative;
    background: rgb(var(--color-background));
    max-width: 900px;
    max-height: 90vh;
    overflow-y: auto;
    margin: 2rem;
    padding: 2rem;
    border-radius: 4px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  }

  .size-chart-modal__toggle {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
  }

  .size-chart-modal__toggle svg {
    width: 1.5rem;
    height: 1.5rem;
    fill: currentColor;
  }

  .size-chart-modal__toggle:hover {
    opacity: 0.7;
  }

  .size-chart-modal__heading {
    font-size: 1.75rem;
    margin-bottom: 1.5rem;
    font-weight: 600;
    padding-right: 2rem;
  }

  .size-chart-modal__content-info {
    padding-top: 0.5rem;
  }

  @media screen and (max-width: 749px) {
    .size-chart-modal__content {
      margin: 1rem;
      padding: 1.5rem;
      max-height: 95vh;
    }

    .size-chart-modal__heading {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
  }
{% endstylesheet %}


{% schema %}
{
  "name": "Size Chart Modal",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Size Guide"
    },
    {
      "type": "checkbox",
      "id": "show_units_toggle",
      "label": "Show units toggle (inches/cm)",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Size Chart Modal"
    }
  ]
}
{% endschema %}
